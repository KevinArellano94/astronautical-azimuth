---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
---

<Layout title="Welcome to Astro.">
  <main>
    <!-- Your existing content -->

    <!-- Fetch and display Pokemon data -->
    <div id="pokemon-data">Loading data...</div>
  </main>

  <script type="module">
    // Fetch data from the Netlify function
    const fetchData = async () => {
      try {
        const response = await fetch("/.netlify/functions/getData");
        const data = await response.json();

        // Display the data in the #pokemon-data div
        document.getElementById("pokemon-data").innerText = JSON.stringify(
          data,
          null,
          2,
        );
      } catch (error) {
        console.error("Error fetching data:", error);
      }
    };

    // Call fetchData when the page loads
    fetchData();
  </script>
</Layout>
